# Тестовое задание ПТМК  

- Язык программирования: Python  
- СУБД: SQLite  

Для использования программы необходимо запустить файл main.py, передав в него параметры.  
Пример:  

```shell
python main.py 1
```

### Подключение к базе данных  
Подключение к БД осуществляется при помощи класса DatabaseManager в файле [database_manager.py](database_manager.py)
Его поля это подключение и курсор БД. В этом же файле создается объект этого класса data, при помощи которого можно взаимодействовать с базой данных.  

### 1. Создание таблицы
Создание таблицы реализовано в файле [create_table.py](create_table.py). При помощи SQL-запроса создается таблица с сотрудниками.  
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/374ea79d-643e-4f39-a78c-df83509ae0b2)
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/158105cb-8a97-45de-a1f4-a1283d9bdbaa)



### 2. Добавление сотрудника  
Добавление сотрудника в БД реализовано в файле [add_employee.py](add_employee.py). Вызов через main с вводом всех аргументов. 
Создается объект класса [Employee](employee.py), после чего его поля заносятся в базу данных при помощи собственного метода.
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/893a3063-4941-492d-bd1f-f9026e9ff6c1)
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/e0a3dbb7-7c9e-4b30-a4ee-726ce65d1261)


### 3. Вывод сотрудников  
Вывод сотрудников реализован в файле [display_employees.py](display_employees.py) при помощи SQL-запроса. Вывод полных лет реализован методом класса Employee.
В выводимых строках не повторяются значения полей name и date_of_birth одновременно. Значения отсортированы по имени.  
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/de5a698a-9c1e-44c2-a165-6266e0fc7759)  

### 4. Заполнение БД  
База данных заполняется миллионом строк в файле [fill_db.py](fill_db.py) случайными значениями. Также создается 100 строк в которых пол мужской, а имя начинается с "F". 
У класса существует статический метод, в который можно передать массив с объектами этого класса, после чего они запишутся в БД.  
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/e355297c-fd21-41da-89da-f74333741b97)
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/cff6111a-4105-4289-9c5f-887d8e2a1d36)



### 5. Запрос по критериям  
Запрос реализован в файле [get_query.py](get_query.py). Запрос выбирает все строки, где пол мужской и имя начинается с "F".
В функции есть подсчет времени, за которое исполняется запрос.  
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/97fad92e-27cd-4023-9ca5-c699dfee5c6b)


### 6. Оптимизация базы данных  
Оптимизация происходит в том же файле в функции create_index(), которая создает индексы, ускоряющие поиск в БД.  
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/7fbbe85f-07c6-4385-9b6d-ac42581d64c2)
![изображение](https://github.com/Urvatov/test-task-ptmk/assets/117490456/a1ef4ae1-87b3-4371-bc6d-9968f8a9b287)













